<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Profile Manager</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f9;
  margin: 0;
  padding: 20px;
}
.container {
  max-width: 1000px;
  margin: auto;
  background: #fff;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
h1 { text-align: center; margin-bottom: 20px; }
nav { text-align:center; margin-bottom: 15px; }
nav button {
  margin: 5px;
  padding: 10px 20px;
  border: none;
  background: #4CAF50;
  color: white;
  border-radius: 5px;
  cursor: pointer;
  transition: 0.3s;
}
nav button:hover { background: #45a049; }
input, select, button {
  padding: 8px;
  margin: 5px 0;
  width: 100%;
  box-sizing: border-box;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}
th, td {
  border: 1px solid #ccc;
  padding: 8px;
  text-align: left;
}
th { background: #4CAF50; color: white; }
.delete-btn {
  background: red;
  color: white;
  border: none;
  padding: 5px 10px;
  cursor: pointer;
}
.delete-btn:hover { background: darkred; }
.hidden { display: none; }
.print-btn {
  background: #2196F3;
  color: white;
  border: none;
  padding: 5px 10px;
  cursor: pointer;
}
.print-btn:hover { background: #1976D2; }
.highlight {
  background-color: #c8f7c5;
  transition: background-color 2s ease;
}
</style>
</head>
<body>

<div class="container">
  <h1>Student Profile Manager</h1>

  <nav>
    <button onclick="showSection('addSection')">Add Student</button>
    <button onclick="showSection('viewSection')">View Students</button>
    <button onclick="showSection('filterSection')">View Branch Wise</button>
  </nav>

  <!-- Add Student Section -->
  <div id="addSection" class="section">
    <h2>Add Student</h2>
    <input type="text" id="name" placeholder="Name">
    <input type="number" id="age" placeholder="Age">
    <input type="email" id="email" placeholder="Email">
    <input type="text" id="phone" placeholder="Phone">
    
    <select id="branch">
      <option value="">Select Branch</option>
      <option>Computer Science</option>
      <option>Civil</option>
      <option>Mechanical</option>
      <option>E&E</option>
      <option>EEE</option>
    </select>
    
    <select id="year">
      <option value="">Select Year</option>
      <option>1</option>
      <option>2</option>
      <option>3</option>
    </select>
    
    <select id="sem">
      <option value="">Select Semester</option>
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
      <option>5</option>
      <option>6</option>
    </select>
    
    <button onclick="addStudent()">Add Student</button>
  </div>

  <!-- View Students Section -->
  <div id="viewSection" class="section hidden">
    <h2>All Students</h2>
    <button class="print-btn" onclick="printTable()">Print Students</button>
    <table id="studentTable">
      <thead>
        <tr>
          <th>Name</th><th>Age</th><th>Email</th><th>Phone</th>
          <th>Branch</th><th>Year</th><th>Sem</th><th>Action</th>
        </tr>
      </thead>
      <tbody id="studentList"></tbody>
    </table>
  </div>

  <!-- Filter Section -->
  <div id="filterSection" class="section hidden">
    <h2>View Students Branch Wise</h2>
    <select id="branchFilter">
      <option value="">Select Branch</option>
      <option>Computer Science</option>
      <option>Civil</option>
      <option>Mechanical</option>
      <option>E&E</option>
      <option>EEE</option>
    </select>
    <select id="yearFilter">
      <option value="">Select Year</option>
      <option>1</option>
      <option>2</option>
      <option>3</option>
    </select>
    <select id="semFilter">
      <option value="">Select Semester</option>
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
      <option>5</option>
      <option>6</option>
    </select>
    <button onclick="filterStudents()">Filter</button>
    <button class="print-btn" onclick="printFiltered()">Print Branch Wise</button>
    
    <table id="filterTable">
      <thead>
        <tr>
          <th>Name</th><th>Age</th><th>Email</th><th>Phone</th>
          <th>Branch</th><th>Year</th><th>Sem</th>
        </tr>
      </thead>
      <tbody id="filterList"></tbody>
    </table>
  </div>
</div>

<script>
// ---------- SHOW SECTION ----------
function showSection(sectionId) {
  document.querySelectorAll('.section').forEach(sec => sec.classList.add("hidden"));
  document.getElementById(sectionId).classList.remove("hidden");
  if (sectionId === 'viewSection') loadStudents();
}

// ---------- ADD STUDENT ----------
function addStudent() {
  const student = {
    id: Date.now(),
    name: document.getElementById("name").value.trim(),
    age: document.getElementById("age").value.trim(),
    email: document.getElementById("email").value.trim(),
    phone: document.getElementById("phone").value.trim(),
    branch: document.getElementById("branch").value,
    year: document.getElementById("year").value,
    sem: document.getElementById("sem").value
  };

  if (!student.name || !student.age || !student.email || !student.phone || !student.branch || !student.year || !student.sem) {
    alert("Please fill all fields");
    return;
  }

  let students = JSON.parse(localStorage.getItem("students")) || [];
  students.push(student);
  localStorage.setItem("students", JSON.stringify(students));

  alert("âœ… Student Added Successfully!");
  document.querySelectorAll("#addSection input, #addSection select").forEach(el => el.value = "");

  showSection('viewSection');
  setTimeout(() => highlightStudent(student.id), 300);
}

// ---------- LOAD STUDENTS ----------
function loadStudents() {
  const students = JSON.parse(localStorage.getItem("students")) || [];
  const table = document.getElementById("studentList");
  table.innerHTML = "";
  students.forEach(s => {
    table.innerHTML += `
      <tr id="student-${s.id}">
        <td>${s.name}</td>
        <td>${s.age}</td>
        <td>${s.email}</td>
        <td>${s.phone}</td>
        <td>${s.branch}</td>
        <td>${s.year}</td>
        <td>${s.sem}</td>
        <td><button class="delete-btn" onclick="deleteStudent(${s.id})">Delete</button></td>
      </tr>`;
  });
}

// ---------- HIGHLIGHT NEWLY ADDED ----------
function highlightStudent(id) {
  const row = document.getElementById(`student-${id}`);
  if (row) {
    row.classList.add("highlight");
    setTimeout(() => row.classList.remove("highlight"), 2000);
  }
}

// ---------- DELETE STUDENT ----------
function deleteStudent(id) {
  let students = JSON.parse(localStorage.getItem("students")) || [];
  students = students.filter(s => s.id !== id);
  localStorage.setItem("students", JSON.stringify(students));
  loadStudents();
}

// ---------- FILTER STUDENTS ----------
function filterStudents() {
  const branch = document.getElementById("branchFilter").value;
  const year = document.getElementById("yearFilter").value;
  const sem = document.getElementById("semFilter").value;

  const students = JSON.parse(localStorage.getItem("students")) || [];
  const filtered = students.filter(s =>
    (branch ? s.branch === branch : true) &&
    (year ? s.year === year : true) &&
    (sem ? s.sem === sem : true)
  );

  const table = document.getElementById("filterList");
  table.innerHTML = "";
  filtered.forEach(s => {
    table.innerHTML += `
      <tr>
        <td>${s.name}</td>
        <td>${s.age}</td>
        <td>${s.email}</td>
        <td>${s.phone}</td>
        <td>${s.branch}</td>
        <td>${s.year}</td>
        <td>${s.sem}</td>
      </tr>`;
  });
}

// ---------- PRINT TABLES ----------
function printTable() {
  const divToPrint = document.getElementById("studentTable").outerHTML;
  const newWin = window.open("");
  newWin.document.write(`<html><body>${divToPrint}</body></html>`);
  newWin.print();
  newWin.close();
}

function printFiltered() {
  const divToPrint = document.getElementById("filterTable").outerHTML;
  const newWin = window.open("");
  newWin.document.write(`<html><body>${divToPrint}</body></html>`);
  newWin.print();
  newWin.close();
}
</script>

</body>
</html>